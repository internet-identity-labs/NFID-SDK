"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[983],{84625:(e,s,t)=>{t.r(s),t.d(s,{VaultTransactionsDetailsPage:()=>g,default:()=>b});var l=t(18414),r=t(87273),i=t(95163),a=t(96349),d=t(21882),n=t(21325),o=t(27024),c=t(17974),x=t(45482),m=t(76058),u=t(33693);const v=e=>{let{title:s,value:t,direction:r="right"}=e;return(0,u.jsxs)("div",{className:(0,l.Z)("flex","left"===r&&"flex-row-reverse"),children:[(0,u.jsxs)("div",{className:"w-full px-8 py-5 text-gray-600 rounded-l-lg bg-gray-50",children:[(0,u.jsx)("p",{className:"font-bold tracking-[0.01em] mb-3",children:s}),(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)(m.M,{value:t,leadingChars:20,trailingChars:10}),(0,u.jsx)(d.CK,{className:"ml-3 text-secondary",value:t})]})]}),(0,u.jsx)("div",{className:(0,l.Z)("hidden md:block border-l-[56px] border-t-[40px] border-b-[40px]","border-l-gray-50 border-t-transparent border-b-transparent","left"===r&&"rotate-180")})]})},p=e=>{let{title:s,content:t,titleClassName:r}=e;return(0,u.jsxs)("div",{className:(0,l.Z)("grid grid-cols-[160px,1fr] w-full text-sm","border-b-[1px] border-gray-100 min-h-[48px]","items-center py-1"),children:[(0,u.jsx)("div",{className:(0,l.Z)("text-secondary",r),children:s}),(0,u.jsx)("div",{children:t})]})},h=e=>{let{error:s}=e;return(0,u.jsxs)(d.TK,{large:!0,title:"Transaction status details",secondaryButton:{type:"primary",onClick:()=>{},text:"Close",block:!0},trigger:(0,u.jsx)("div",{className:"cursor-pointer text-blue",children:"Details"}),children:[(0,u.jsx)("p",{className:"text-sm",children:"Text describing the reason for rejection. NFID is a privacy-preserving, one-touch multi-factor wallet protocol developed by Internet Identity Labs."}),(0,u.jsx)("p",{className:"mt-6 mb-1 text-xs",children:"Error details"}),(0,u.jsx)("div",{className:(0,l.Z)("border rounded-md border-red ring-[3px] ring-red-100","py-2 px-2.5 font-mono text-secondary text-sm min-h-[200px]"),children:s})]})},j=e=>{let{state:s}=e;return(0,u.jsx)("div",{className:(0,l.Z)("absolute -translate-x-1/2 left-1/2 top-1/2 -translate-y-1/2","-rotate-90 md:rotate-180 rounded-full text-white","flex items-center justify-center","w-10 h-10 md:w-14 md:h-14",s===n.g7.PENDING&&"bg-amber-500",s===n.g7.APPROVED&&"bg-emerald-500",s===n.g7.REJECTED&&"bg-red-500",s===n.g7.CANCELED&&"bg-gray-500"),children:(0,u.jsx)(d.sK,{})})},g=()=>{var e,s,t;const[m,g]=(0,r.useState)(!1),[b,N]=(0,r.useState)(),f=(0,i.TH)();r.useEffect((()=>{b&&n.vF.vaultTransactionLoaded({vaultId:b.vaultId.toString(),transactionId:b.id.toString(),status:b.status,amount:Number(b.amountICP)})}),[b]),(0,r.useEffect)((()=>{N(f.state)}),[f.state]);const y=(0,r.useCallback)((async e=>{if(null!==b&&void 0!==b&&b.id)try{g(!0),await(0,n.Jz)({transactionId:b.id,state:e}),window.history.back()}catch(s){console.log({e:s}),a.Am.error(s.message)}finally{g(!1)}}),[null===b||void 0===b?void 0:b.id]);return(0,u.jsxs)(c.Z,{isLoading:m,pageTitle:"Transaction details",showBackButton:!0,children:[(0,u.jsxs)("div",{className:"relative flex flex-col md:flex-row",children:[(0,u.jsx)("div",{className:"w-full md:w-1/2",children:(0,u.jsx)(v,{title:`From: ${null===b||void 0===b?void 0:b.fromWalletName}`,value:null!==(e=null===b||void 0===b?void 0:b.fromAddress)&&void 0!==e?e:"",direction:"right"})}),(0,u.jsx)("div",{className:"w-full md:w-1/2 mt-[10px] md:mt-0",children:(0,u.jsx)(v,{title:"To:",value:null!==(s=null===b||void 0===b?void 0:b.toAddress)&&void 0!==s?s:"",direction:"left"})}),(0,u.jsx)(j,{state:null===b||void 0===b?void 0:b.status})]}),(0,u.jsxs)("div",{className:"flex items-center justify-between mb-8 mt-7",children:[(0,u.jsx)("p",{className:"text-xl font-bold",children:"Details"}),(0,u.jsxs)("div",{className:(0,l.Z)("flex items-center text-blue-600 cursor-pointer",(null===b||void 0===b?void 0:b.status)!==n.g7.APPROVED&&"hidden"),children:[(0,u.jsx)("p",{className:"mr-2 text-sm font-bold",children:"View on block explorer"}),(0,u.jsx)(d.h_,{})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)(p,{title:"Tokens",content:(0,u.jsxs)("div",{children:[(0,u.jsxs)("p",{children:[null===b||void 0===b?void 0:b.amountICP," ICP"]}),(0,u.jsxs)("p",{className:"text-xs text-secondary",children:["\u2248",null===b||void 0===b?void 0:b.amountUSD]})]})}),(0,u.jsx)(p,{title:"Initiated by",content:`${null===b||void 0===b?void 0:b.ownerName} ${null!==b&&void 0!==b&&b.isInitiatedByYou?"(You)":""}`}),(0,u.jsx)(p,{title:"Date and time",content:null===b||void 0===b?void 0:b.createdDate}),(0,u.jsx)(p,{title:"Status",content:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsx)(d.Ct,{type:x.k[null!==(t=null===b||void 0===b?void 0:b.status)&&void 0!==t?t:"CANCELED"],children:null===b||void 0===b?void 0:b.status}),null!==b&&void 0!==b&&b.memo?(0,u.jsx)(h,{error:null===b||void 0===b?void 0:b.memo}):null]})}),(0,u.jsx)(p,{title:"Approvals",titleClassName:"align-top h-full mt-1",content:(0,u.jsx)(o.U,{className:"!p-0 text-secondary",titleClassName:"!text-sm font-normal text-black",detailsClassName:"mt-2",title:`${null===b||void 0===b?void 0:b.approvers.filter((e=>e.isApproved)).length} of ${null===b||void 0===b?void 0:b.memberThreshold}`,isBorder:!1,details:(0,u.jsx)("div",{className:"grid grid-cols-1 text-sm sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:null===b||void 0===b?void 0:b.approvers.map(((e,s)=>(0,u.jsxs)("div",{className:"flex items-center h-10",children:[(0,u.jsx)("span",{className:(0,l.Z)("w-2 h-2 rounded-full mr-2.5 bg-gray-100",e.isApproved&&"bg-emerald-500")}),(0,u.jsx)("p",{children:e.name})]},`approver_${e.name}_${s}`)))})})}),(0,u.jsxs)("div",{className:(0,l.Z)("flex justify-end mt-5",(null===b||void 0===b?void 0:b.status)!==n.g7.PENDING&&"hidden"),children:[(0,u.jsx)(d.zx,{onClick:()=>y(n.g7.REJECTED),className:(0,l.Z)(!(null!==b&&void 0!==b&&b.isApprovedByYou)&&"hidden"),type:"primary",children:"Cancel transaction"}),(0,u.jsx)(d.zx,{onClick:()=>y(n.g7.REJECTED),className:(0,l.Z)("mr-5",(null===b||void 0===b?void 0:b.isApprovedByYou)&&"hidden"),type:"stroke",children:"Rejected"}),(0,u.jsx)(d.zx,{onClick:()=>y(n.g7.APPROVED),className:(0,l.Z)((null===b||void 0===b?void 0:b.isApprovedByYou)&&"hidden"),type:"primary",children:"Approve"})]})]})]})},b=g},45482:(e,s,t)=>{t.d(s,{_:()=>x,k:()=>c});var l=t(87273),r=t(95163),i=t(96349),a=t(21882),d=t(10682),n=t(76058),o=t(33693);let c;!function(e){e.APPROVED="success",e.PENDING="warning",e.CANCELED="cancel",e.REJECTED="error"}(c||(c={}));const x=e=>{var s;const t=(0,r.s0)(),x=(0,l.useCallback)((()=>{t(`${d.Cb.base}/${d.Cb.vaults}/transactions/${e.id}`,{state:e})}),[t,e]),m=(0,l.useCallback)(((e,s)=>{e.stopPropagation(),navigator.clipboard.writeText(s),i.Am.success("Address copied to clipboard")}),[]);return(0,o.jsxs)(a.SC,{className:"space-x-5 hover:bg-gray-100",onClick:x,children:[(0,o.jsx)(a.pj,{isLeft:!0,children:e.number}),(0,o.jsx)(a.pj,{children:e.ownerName}),(0,o.jsx)(a.pj,{className:"hover:text-secondary",onClick:s=>m(s,e.fromAddress),children:(0,o.jsx)(a.u,{tip:"Copy to clipboard",children:(0,o.jsx)("span",{children:e.fromWalletName})})}),(0,o.jsx)(a.pj,{className:"hover:text-secondary",onClick:s=>m(s,e.toAddress),children:(0,o.jsx)(a.u,{tip:"Copy to clipboard",children:(0,o.jsx)(n.M,{value:e.toAddress,leadingChars:9,trailingChars:3})})}),(0,o.jsxs)(a.pj,{children:[(0,o.jsxs)("p",{children:[null===(s=e.amountICP)||void 0===s?void 0:s.toString()," ICP"]}),(0,o.jsx)("p",{className:"text-xs text-secondary",children:e.amountUSD})]}),(0,o.jsx)(a.pj,{children:(0,o.jsx)(a.Ct,{type:c[e.status],children:e.status})}),(0,o.jsx)(a.pj,{isRight:!0,children:(0,o.jsx)(a.xz,{className:"ml-auto text-secondary"})})]})}}}]);
//# sourceMappingURL=983.1a4849a0.chunk.js.map