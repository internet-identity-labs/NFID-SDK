{"version":3,"file":"static/js/627.c03c2ad0.chunk.js","mappings":"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","sources":["features/vaults/vaults-details/transactions-details-page/info-block.tsx","features/vaults/vaults-details/transactions-details-page/info-row.tsx","features/vaults/vaults-details/transactions-details-page/rejected-modal.tsx","features/vaults/vaults-details/transactions-details-page/status-arrow.tsx","features/vaults/vaults-details/transactions-details-page/index.tsx","features/vaults/vaults-details/transactions-page/table/table-row.tsx","../../../node_modules/@xstate/react/es/useActor.js"],"sourcesContent":["import clsx from \"clsx\"\nimport React from \"react\"\n\nimport { Copy } from \"@nfid-frontend/ui\"\n\nimport { CenterEllipsis } from \"frontend/ui/atoms/center-ellipsis\"\n\ninterface IVaultTransactionInfo {\n  title?: string\n  direction: \"left\" | \"right\"\n  value: string\n}\n\nexport const VaultTransactionInfo = ({\n  title,\n  value,\n  direction = \"right\",\n}: IVaultTransactionInfo) => {\n  return (\n    <div className={clsx(\"flex\", direction === \"left\" && \"flex-row-reverse\")}>\n      <div className=\"w-full px-8 py-5 text-gray-600 rounded-l-lg bg-gray-50\">\n        <p className=\"font-bold tracking-[0.01em] mb-3\">{title}</p>\n        <div className=\"flex items-center\">\n          <CenterEllipsis value={value} leadingChars={20} trailingChars={10} />\n          <Copy className=\"ml-3 text-secondary\" value={value} />\n        </div>\n      </div>\n      <div\n        className={clsx(\n          \"hidden md:block border-l-[56px] border-t-[40px] border-b-[40px]\",\n          \"border-l-gray-50 border-t-transparent border-b-transparent\",\n          direction === \"left\" && \"rotate-180\",\n        )}\n      />\n    </div>\n  )\n}\n","import clsx from \"clsx\"\n\ninterface ITransactionInfoRow {\n  title: JSX.Element | string\n  content?: JSX.Element | string\n  titleClassName?: string\n}\n\nexport const TransactionInfoRow = ({\n  title,\n  content,\n  titleClassName,\n}: ITransactionInfoRow) => {\n  return (\n    <div\n      className={clsx(\n        \"grid grid-cols-[160px,1fr] w-full text-sm\",\n        \"border-b-[1px] border-gray-100 min-h-[48px]\",\n        \"items-center py-1\",\n      )}\n    >\n      <div className={clsx(\"text-secondary\", titleClassName)}>{title}</div>\n      <div>{content}</div>\n    </div>\n  )\n}\n","import clsx from \"clsx\"\n\nimport { ModalAdvanced } from \"@nfid-frontend/ui\"\n\nexport interface IVaultTransactionRejectReason {\n  error: string\n}\n\nexport const VaultTransactionRejectReason = ({\n  error,\n}: IVaultTransactionRejectReason) => {\n  return (\n    <ModalAdvanced\n      large\n      title=\"Transaction status details\"\n      secondaryButton={{\n        type: \"primary\",\n        onClick: () => {},\n        text: \"Close\",\n        block: true,\n      }}\n      trigger={<div className=\"cursor-pointer text-blue\">Details</div>}\n    >\n      <p className=\"text-sm\">\n        Text describing the reason for rejection. NFID is a privacy-preserving,\n        one-touch multi-factor wallet protocol developed by Internet Identity\n        Labs.\n      </p>\n      <p className=\"mt-6 mb-1 text-xs\">Error details</p>\n      <div\n        className={clsx(\n          \"border rounded-md border-red ring-[3px] ring-red-100\",\n          \"py-2 px-2.5 font-mono text-secondary text-sm min-h-[200px]\",\n        )}\n      >\n        {error}\n      </div>\n    </ModalAdvanced>\n  )\n}\n","import clsx from \"clsx\"\n\nimport { IconCmpArrow } from \"@nfid-frontend/ui\"\nimport { TransactionState } from \"@nfid/integration\"\n\ninterface ITransactionStatusArrow {\n  state?: TransactionState\n}\nexport const TransactionStatusArrow = ({ state }: ITransactionStatusArrow) => {\n  return (\n    <div\n      className={clsx(\n        \"absolute -translate-x-1/2 left-1/2 top-1/2 -translate-y-1/2\",\n        \"-rotate-90 md:rotate-180 rounded-full text-white\",\n        \"flex items-center justify-center\",\n        \"w-10 h-10 md:w-14 md:h-14\",\n        state === TransactionState.PENDING && \"bg-amber-500\",\n        state === TransactionState.APPROVED && \"bg-emerald-500\",\n        state === TransactionState.REJECTED && \"bg-red-500\",\n        state === TransactionState.CANCELED && \"bg-gray-500\",\n      )}\n    >\n      <IconCmpArrow />\n    </div>\n  )\n}\n","import clsx from \"clsx\"\nimport React, { useCallback, useEffect, useState } from \"react\"\nimport { useLocation } from \"react-router-dom\"\nimport { toast } from \"react-toastify\"\n\nimport { Badge, Button, IconCmpOut } from \"@nfid-frontend/ui\"\nimport { approveTransaction, TransactionState } from \"@nfid/integration\"\n\nimport { Accordion } from \"frontend/ui/atoms/accordion\"\nimport ProfileTemplate from \"frontend/ui/templates/profile-template/Template\"\n\nimport {\n  IVaultTransactionsDetails,\n  VaultBadgeStatuses,\n} from \"../transactions-page/table/table-row\"\nimport { VaultTransactionInfo } from \"./info-block\"\nimport { TransactionInfoRow } from \"./info-row\"\nimport { VaultTransactionRejectReason } from \"./rejected-modal\"\nimport { TransactionStatusArrow } from \"./status-arrow\"\n\nexport const VaultTransactionsDetailsPage = () => {\n  const [isLoading, setIsLoading] = useState(false)\n  const [state, setState] = useState<IVaultTransactionsDetails>()\n  const location = useLocation()\n\n  useEffect(() => {\n    setState(location.state as IVaultTransactionsDetails)\n  }, [location.state])\n\n  const onChangeStatus = useCallback(\n    async (status: TransactionState) => {\n      if (!state?.id) return\n      try {\n        setIsLoading(true)\n        await approveTransaction({\n          transactionId: state.id,\n          state: status,\n        })\n        window.history.back()\n      } catch (e: any) {\n        console.log({ e })\n        toast.error(e.message)\n      } finally {\n        setIsLoading(false)\n      }\n    },\n    [state?.id],\n  )\n\n  return (\n    <ProfileTemplate\n      isLoading={isLoading}\n      pageTitle=\"Transaction details\"\n      showBackButton\n    >\n      <div className=\"relative flex flex-col md:flex-row\">\n        <div className=\"w-full md:w-1/2\">\n          <VaultTransactionInfo\n            title={`From: ${state?.fromWalletName}`}\n            value={state?.fromAddress ?? \"\"}\n            direction=\"right\"\n          />\n        </div>\n        <div className=\"w-full md:w-1/2 mt-[10px] md:mt-0\">\n          <VaultTransactionInfo\n            title={\"To:\"}\n            value={state?.toAddress ?? \"\"}\n            direction=\"left\"\n          />\n        </div>\n        <TransactionStatusArrow state={state?.status} />\n      </div>\n      <div className=\"flex items-center justify-between mb-8 mt-7\">\n        <p className=\"text-xl font-bold\">Details</p>\n        <div\n          className={clsx(\n            \"flex items-center text-blue-600 cursor-pointer\",\n            state?.status !== TransactionState.APPROVED && \"hidden\",\n          )}\n        >\n          <p className=\"mr-2 text-sm font-bold\">View on block explorer</p>\n          <IconCmpOut />\n        </div>\n      </div>\n      <div>\n        <TransactionInfoRow\n          title=\"Tokens\"\n          content={\n            <div>\n              <p>{state?.amountICP} ICP</p>\n              <p className=\"text-xs text-secondary\">â‰ˆ{state?.amountUSD}</p>\n            </div>\n          }\n        />\n        <TransactionInfoRow\n          title=\"Initiated by\"\n          content={`${state?.ownerName} ${\n            state?.isInitiatedByYou ? \"(You)\" : \"\"\n          }`}\n        />\n        <TransactionInfoRow\n          title=\"Date and time\"\n          content={state?.createdDate}\n        />\n        <TransactionInfoRow\n          title=\"Status\"\n          content={\n            <div className=\"flex items-center justify-between\">\n              <Badge\n                type={VaultBadgeStatuses[state?.status ?? \"CANCELED\"]}\n                children={state?.status}\n              />\n              {state?.memo ? (\n                <VaultTransactionRejectReason error={state?.memo} />\n              ) : null}\n            </div>\n          }\n        />\n        <TransactionInfoRow\n          title=\"Approvals\"\n          titleClassName=\"align-top h-full mt-1\"\n          content={\n            <Accordion\n              className=\"!p-0 text-secondary\"\n              titleClassName=\"!text-sm font-normal text-black\"\n              detailsClassName=\"mt-2\"\n              title={`${\n                state?.approvers.filter((approver) => approver.isApproved)\n                  .length\n              } of ${state?.memberThreshold}`}\n              isBorder={false}\n              details={\n                <div className=\"grid grid-cols-1 text-sm sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4\">\n                  {state?.approvers.map((member, index) => (\n                    <div\n                      className=\"flex items-center h-10\"\n                      key={`approver_${member.name}_${index}`}\n                    >\n                      <span\n                        className={clsx(\n                          \"w-2 h-2 rounded-full mr-2.5 bg-gray-100\",\n                          member.isApproved && \"bg-emerald-500\",\n                        )}\n                      />\n                      <p>{member.name}</p>\n                    </div>\n                  ))}\n                </div>\n              }\n            />\n          }\n        />\n        <div\n          className={clsx(\n            \"flex justify-end mt-5\",\n            state?.status !== TransactionState.PENDING && \"hidden\",\n          )}\n        >\n          <Button\n            onClick={() => onChangeStatus(TransactionState.REJECTED)}\n            className={clsx(!state?.isApprovedByYou && \"hidden\")}\n            type=\"primary\"\n          >\n            Cancel transaction\n          </Button>\n          <Button\n            onClick={() => onChangeStatus(TransactionState.REJECTED)}\n            className={clsx(\"mr-5\", state?.isApprovedByYou && \"hidden\")}\n            type=\"stroke\"\n          >\n            Rejected\n          </Button>\n          <Button\n            onClick={() => onChangeStatus(TransactionState.APPROVED)}\n            className={clsx(state?.isApprovedByYou && \"hidden\")}\n            type=\"primary\"\n          >\n            Approve\n          </Button>\n        </div>\n      </div>\n    </ProfileTemplate>\n  )\n}\nexport default VaultTransactionsDetailsPage\n","import React, { useCallback } from \"react\"\nimport { useNavigate } from \"react-router-dom\"\nimport { toast } from \"react-toastify\"\n\nimport {\n  Badge,\n  IconCmpArrowRight,\n  TableCell,\n  TableRow,\n  Tooltip,\n} from \"@nfid-frontend/ui\"\nimport { TransactionState } from \"@nfid/integration\"\n\nimport { ProfileConstants } from \"frontend/apps/identity-manager/profile/routes\"\nimport { CenterEllipsis } from \"frontend/ui/atoms/center-ellipsis\"\n\ninterface IApprover {\n  name: string\n  isApproved: boolean\n}\n\nexport interface IVaultTransactionsDetails {\n  number: number\n  id: bigint\n  fromWalletName: string\n  fromAddress: string\n  toAddress: string\n  amountICP: string\n  amountUSD: string\n  ownerName: string\n  createdDate: string\n  memberThreshold: number\n  approvers: IApprover[]\n  status: TransactionState\n  isInitiatedByYou: boolean\n  isApprovedByYou: boolean\n  memo?: string\n}\n\nexport enum VaultBadgeStatuses {\n  APPROVED = \"success\",\n  PENDING = \"warning\",\n  CANCELED = \"cancel\",\n  REJECTED = \"error\",\n}\n\nexport const VaultsTransactionsTableRow: React.FC<IVaultTransactionsDetails> = (\n  state,\n) => {\n  const navigate = useNavigate()\n\n  const onDetailsOpen = useCallback(() => {\n    navigate(\n      `${ProfileConstants.base}/${ProfileConstants.vaults}/transactions/${state.id}`,\n      {\n        state,\n      },\n    )\n  }, [navigate, state])\n\n  const copyToClipboard = useCallback(\n    (e: React.MouseEvent<HTMLDivElement, MouseEvent>, value: string) => {\n      e.stopPropagation()\n      navigator.clipboard.writeText(value)\n      toast.success(\"Address copied to clipboard\")\n    },\n    [],\n  )\n\n  return (\n    <TableRow className=\"space-x-5 hover:bg-gray-100\" onClick={onDetailsOpen}>\n      <TableCell isLeft>{state.number}</TableCell>\n      <TableCell>{state.ownerName}</TableCell>\n      <TableCell\n        className=\"hover:text-secondary\"\n        onClick={(e) => copyToClipboard(e, state.fromAddress)}\n      >\n        <Tooltip tip={\"Copy to clipboard\"}>\n          <span>{state.fromWalletName}</span>\n        </Tooltip>\n      </TableCell>\n      <TableCell\n        className=\"hover:text-secondary\"\n        onClick={(e) => copyToClipboard(e, state.toAddress)}\n      >\n        <Tooltip tip={\"Copy to clipboard\"}>\n          <CenterEllipsis\n            value={state.toAddress}\n            leadingChars={9}\n            trailingChars={3}\n          />\n        </Tooltip>\n      </TableCell>\n      <TableCell>\n        <p>{state.amountICP?.toString()} ICP</p>\n        <p className=\"text-xs text-secondary\">{state.amountUSD}</p>\n      </TableCell>\n      <TableCell>\n        <Badge type={VaultBadgeStatuses[state.status]}>{state.status}</Badge>\n      </TableCell>\n      <TableCell isRight>\n        <IconCmpArrowRight className=\"ml-auto text-secondary\" />\n      </TableCell>\n    </TableRow>\n  )\n}\n","import { useRef, useCallback } from 'react';\nimport useIsomorphicLayoutEffect from 'use-isomorphic-layout-effect';\nimport useConstant from './useConstant';\nimport { useSyncExternalStore } from 'use-sync-external-store/shim';\nexport function isActorWithState(actorRef) {\n    return 'state' in actorRef;\n}\nfunction isDeferredActor(actorRef) {\n    return 'deferred' in actorRef;\n}\nfunction defaultGetSnapshot(actorRef) {\n    return 'getSnapshot' in actorRef\n        ? actorRef.getSnapshot()\n        : isActorWithState(actorRef)\n            ? actorRef.state\n            : undefined;\n}\nexport function useActor(actorRef, getSnapshot) {\n    if (getSnapshot === void 0) { getSnapshot = defaultGetSnapshot; }\n    var actorRefRef = useRef(actorRef);\n    var deferredEventsRef = useRef([]);\n    var subscribe = useCallback(function (handleStoreChange) {\n        var unsubscribe = actorRef.subscribe(handleStoreChange).unsubscribe;\n        return unsubscribe;\n    }, [actorRef]);\n    var boundGetSnapshot = useCallback(function () { return getSnapshot(actorRef); }, [\n        actorRef,\n        getSnapshot\n    ]);\n    var storeSnapshot = useSyncExternalStore(subscribe, boundGetSnapshot, boundGetSnapshot);\n    var send = useConstant(function () { return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var event = args[0];\n        if (process.env.NODE_ENV !== 'production' && args.length > 1) {\n            console.warn(\"Unexpected payload: \".concat(JSON.stringify(args[1]), \". Only a single event object can be sent to actor send() functions.\"));\n        }\n        var currentActorRef = actorRefRef.current;\n        // If the previous actor is a deferred actor,\n        // queue the events so that they can be replayed\n        // on the non-deferred actor.\n        if (isDeferredActor(currentActorRef) && currentActorRef.deferred) {\n            deferredEventsRef.current.push(event);\n        }\n        else {\n            currentActorRef.send(event);\n        }\n    }; });\n    useIsomorphicLayoutEffect(function () {\n        actorRefRef.current = actorRef;\n        // Dequeue deferred events from the previous deferred actorRef\n        while (deferredEventsRef.current.length > 0) {\n            var deferredEvent = deferredEventsRef.current.shift();\n            actorRef.send(deferredEvent);\n        }\n    }, [actorRef]);\n    return [storeSnapshot, send];\n}\n"],"names":["VaultTransactionInfo","title","value","direction","className","clsx","leadingChars","trailingChars","TransactionInfoRow","content","titleClassName","VaultTransactionRejectReason","error","large","secondaryButton","type","onClick","text","block","trigger","TransactionStatusArrow","state","TransactionState","VaultTransactionsDetailsPage","isLoading","setIsLoading","useState","setState","location","useLocation","useEffect","onChangeStatus","useCallback","async","id","approveTransaction","transactionId","status","window","history","back","e","console","log","toast","message","pageTitle","showBackButton","fromWalletName","fromAddress","toAddress","amountICP","amountUSD","ownerName","isInitiatedByYou","createdDate","VaultBadgeStatuses","children","memo","detailsClassName","approvers","filter","approver","isApproved","length","memberThreshold","isBorder","details","map","member","index","name","isApprovedByYou","VaultsTransactionsTableRow","navigate","useNavigate","onDetailsOpen","ProfileConstants","copyToClipboard","stopPropagation","navigator","clipboard","writeText","isLeft","number","tip","toString","isRight","isDeferredActor","actorRef","defaultGetSnapshot","getSnapshot","isActorWithState","undefined","useActor","actorRefRef","useRef","deferredEventsRef","subscribe","handleStoreChange","unsubscribe","boundGetSnapshot","storeSnapshot","useSyncExternalStore","send","args","_i","arguments","event","currentActorRef","current","deferred","push","deferredEvent","shift"],"sourceRoot":""}