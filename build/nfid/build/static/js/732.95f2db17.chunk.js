"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[732],{70732:(e,t,n)=>{n.r(t),n.d(t,{default:()=>O});var s=n(87273),a=n(95163),i=n(94379),l=n(57930),c=n(25390),o=n(23439),r=n(78765);class d{constructor(e){this.config=void 0,this.getIdentity=async()=>{var e;const t=null!==(e=(0,r.SC)())&&void 0!==e?e:await(0,o.In)();return await(0,c.p)(t.anchor,"nfid.one","0")},this.config=e}getTokenStandard(){return this.config.tokenStandard}getCacheTtl(){return 30}}var u=n(82898),h=n(33368);const p=new class extends d{async getAssetDetails(){const e=await this.getIdentity();return l.S.getRootAccount(e,this.config.icon).then((e=>[e]))}}({tokenStandard:h.v.BTC,icon:u.JX});const x=new class extends d{async getAssetDetails(){const e=await this.getIdentity();return r.q_.getAccounts(e,this.config.icon)}}({tokenStandard:h.v.ERC20_ETHEREUM,icon:u.wJ});const v=new class extends d{async getAssetDetails(){const e=await this.getIdentity();return r.q_.getNativeAccount(e,this.config.icon).then((e=>[e]))}}({icon:u.kD,tokenStandard:h.v.ETH});const g=new class extends d{async getAssetDetails(){const e=await this.getIdentity();return r.It.getAccounts(e,this.config.icon)}}({tokenStandard:h.v.ERC20_POLYGON,icon:u.gh});const m=new class extends d{async getAssetDetails(){const e=await this.getIdentity();return r.It.getNativeAccount(e,this.config.icon).then((e=>[e]))}}({icon:u.u3,tokenStandard:h.v.MATIC});class b extends i.m{constructor(){super(...arguments),this.getAssetDetails=async e=>this.process(e,[])}getCacheKey(e,t,n){return t.name+e}getFunctionToCall(e){return e.getAssetDetails}}const j=new b([p,m,g,v,x]);var k=n(94244);var f=n(75739),N=n(21650),w=n(18414),y=n(33693);const C=e=>{let{src:t,token:n}=e;return(0,y.jsx)(u.Ee,{src:t,alt:`token-icon-${n}`,className:(0,w.Z)("w-10 h-10")})},A=e=>{let{token:t,label:n,icon:s,tokenBalance:a,usdBalance:i,tokenConfig:l}=e;return(0,y.jsxs)("div",{className:(0,w.Z)("h-20 border border-gray-200 rounded-xl","px-6","flex items-center space-x-6"),children:[(0,y.jsx)("div",{children:(0,y.jsx)(C,{src:s,token:t})}),(0,y.jsxs)("div",{className:"flex-grow",children:[(0,y.jsx)("div",{className:"text-sm font-semibold",id:"label",children:n}),(0,y.jsx)("div",{className:"text-xs text-secondary",id:"token",children:t})]}),(0,y.jsxs)("div",{className:"text-sm font-semibold",id:"token_info",children:[a&&l?l.toPresentation(a):0," ",t]}),(0,y.jsx)("div",{className:"text-sm font-semibold",children:i})]})};var I=n(13791),$=n(54915),_=n(96349),Z=n(46520),D=n(56840),P=n(76058),S=n(62055);const B=s.forwardRef(((e,t)=>{let{children:n,className:s,id:a,...i}=e;return(0,y.jsx)("td",{ref:t,className:(0,w.Z)("relative px-3 h-14 hover:bg-gray-200",s),...i,id:a,children:n})})),T=e=>{let{appName:t,icon:n,accounts:i,currency:l,blockchain:c,toPresentation:o}=e;const r=(0,a.s0)(),d=s.useCallback(((e,t)=>n=>{n.preventDefault(),n.stopPropagation(),_.Am.info(`${e} copied to clipboard`,{toastId:`copied_${e}_${t}`}),navigator.clipboard.writeText(t)}),[]),h=s.useCallback((e=>()=>{r(`${Z.Cb.base}/${Z.Cb.transactions}`,{state:{wallet:{label:`${t} ${e.accountName}`,value:(0,$.PZ)(I.Principal.fromText(e.principalId))},blockchain:c}})}),[t,r,c]);return(0,y.jsx)("tbody",{className:(0,w.Z)("border-b border-grey-200 group"),children:i.map(((e,s)=>(0,y.jsxs)("tr",{className:"pl-10 cursor-pointer hover:bg-gray-200",onClick:h(e),id:`account_row_${s}`,children:[0===s&&(0,y.jsx)(B,{rowSpan:i.length,className:(0,w.Z)("align-top whitespace-nowrap overflow-hidden text-ellipsis group-hover:bg-gray-200"),id:`app_name_${s}`,children:(0,y.jsxs)("div",{className:"flex items-center",style:{height:`calc(1/${i.length} * 100%)`},children:[(0,y.jsx)(D.A,{appName:t,icon:n}),(0,y.jsx)("div",{className:"ml-4 font-semibold",children:t})]})}),(0,y.jsx)(B,{id:`acc_name_${s}`,children:e.accountName}),(0,y.jsxs)(B,{id:`token_balance_${s}`,children:[o?o(e.tokenBalance):0," ",l]}),(0,y.jsx)(B,{id:`usd_balance_${s}`,children:e.usdBalance}),(0,y.jsx)(u.u,{tip:"Copy to clipboard",children:(0,y.jsx)(B,{id:`account_id_${s}`,children:(0,y.jsx)(P.M,{onClick:d("Account ID",e.address),value:e.address,trailingChars:3,leadingChars:4})})}),(0,y.jsx)(u.u,{tip:"Copy to clipboard",children:(0,y.jsx)(B,{id:`principal_id_${s}`,children:(0,y.jsx)(P.M,{onClick:d("Principal ID",e.principalId),value:e.principalId,trailingChars:3,leadingChars:4})})})]},e.address)))})},E=e=>{let{apps:t,currency:n="ICP",blockchain:s="Internet Computer",toPresentation:a}=e;const i=["Application","Account",`${n} balance`,"USD balance","Account ID","Principal ID"];return(0,y.jsx)(S.y6,{children:(0,y.jsxs)(S.W8,{children:[(0,y.jsx)(S.ss,{headings:i}),t.map((e=>(0,y.jsx)(T,{currency:n,appName:e.appName,accounts:e.accounts,icon:e.icon,blockchain:s,toPresentation:a},e.appName)))]})})};var M=n(72565),L=n(93441);const H=e=>{let{balanceSheet:t,isLoading:n}=e;const{token:a}=(0,N.O)(),i=s.useMemo((()=>(e=>{if(!e)return null;const t=Object.values(e.applications).filter((e=>!!e)).sort((0,L.E)((e=>{let{appName:t}=e;return(0,o.Lp)(t)})));return(0,L.h)((e=>{let{appName:t}=e;return t}),["NFID","NNS"])(t)})(t)),[t]),l=s.useMemo((()=>a.find((e=>e.currency===(null===t||void 0===t?void 0:t.token)))),[a,null===t||void 0===t?void 0:t.token]);return(0,y.jsxs)(M.Z,{pageTitle:`Your ${null===t||void 0===t?void 0:t.label} accounts`,className:"w-full min-w-fit z-[1]",containerClassName:"overflow-x-auto",showBackButton:!0,isLoading:n,children:[(0,y.jsx)(A,{token:(null===t||void 0===t?void 0:t.token)||"",tokenConfig:l,label:(null===t||void 0===t?void 0:t.label)||"",icon:(null===t||void 0===t?void 0:t.icon)||"",tokenBalance:null===t||void 0===t?void 0:t.tokenBalance,usdBalance:(null===t||void 0===t?void 0:t.usdBalance)||""}),(0,y.jsx)("div",{className:"mt-5",children:i&&(0,y.jsx)(E,{apps:i,currency:null===t||void 0===t?void 0:t.token,blockchain:null===t||void 0===t?void 0:t.blockchain,toPresentation:null===l||void 0===l?void 0:l.toPresentation})})]})},O=()=>{const{appAccountBalance:e}=(0,f.W)(),t=j.getKeys(),{assets:n,isLoading:i}=(e=>{let{tokens:t}=e;const{data:n,...s}=(0,k.ZP)([t,"assetDetails"],(e=>{let[t]=e;return Promise.all(t.map((async e=>{try{return await j.getAssetDetails(e)}catch(t){return console.error("useAssetDetails",t),[]}})))}));return{assets:(null===n||void 0===n?void 0:n.flat())||[],...s}})({tokens:t}),{token:l}=(0,a.UO)(),c=(0,s.useMemo)((()=>{if(l)return e&&e[l]?e[l]:n?n.find((e=>e.token===l)):void 0}),[e,l,n]);return console.debug(">> ProfileIWallets",{balance:c}),(0,y.jsx)(H,{balanceSheet:c,isLoading:i})}},56840:(e,t,n)=>{n.d(t,{A:()=>l});var s=n(18414),a=n(82898),i=n(33693);const l=e=>{let{appName:t,icon:n,className:l}=e;return(0,i.jsx)("div",{className:(0,s.Z)("bg-white rounded-full w-[40px] h-[40px] text-blue","flex items-center justify-center","text-xl font-medium",l),children:n?(0,i.jsx)(a.Ee,{className:"rounded-full w-[26px] h-[26px] object-contain object-center",src:n,alt:"app icon"}):(0,i.jsx)("div",{children:t[0].toUpperCase()})})}},62055:(e,t,n)=>{n.d(t,{W8:()=>c,ZP:()=>d,ss:()=>o,y6:()=>l});var s=n(18414),a=(n(87273),n(17719)),i=n(33693);const l=e=>{let{children:t}=e;return(0,i.jsx)("div",{className:(0,s.Z)("overflow-x-scroll"),children:t})},c=e=>{let{children:t,className:n}=e;return(0,i.jsx)("table",{className:(0,s.Z)("w-full text-left min-w-[640px]",null!==n&&void 0!==n?n:"table-auto"),children:t})},o=e=>{let{sort:t,reverse:n,headings:l,handleHeaderClick:c}=e;return(0,i.jsx)("thead",{className:"contents",children:(0,i.jsx)("tr",{className:(0,s.Z)("border-b border-gray-900"),children:l.map(((e,l)=>(0,i.jsx)("th",{className:(0,s.Z)("h-16 px-3",0===l&&"pl-[30px]",l===e.length-1&&"pr-[30px]",(null===t||void 0===t?void 0:t.includes(e))&&"cursor-pointer hover:bg-gray-100"),onClick:()=>c&&c(e),children:(0,i.jsxs)("div",{className:(0,s.Z)("flex h-full gap-2 items-center group whitespace-nowrap"),children:[e,(null===t||void 0===t?void 0:t[0])===e&&(0,i.jsx)(a.CSs,{className:(0,s.Z)(n&&"rotate-180")}),(null===t||void 0===t?void 0:t.includes(e))&&(null===t||void 0===t?void 0:t[0])!==e&&(0,i.jsx)("div",{className:(0,s.Z)("invisible group-hover:visible"),children:(0,i.jsx)(a.CSs,{})})]})},`heading${e}`)))})})},r=e=>{let{rows:t,headings:n}=e;return(0,i.jsx)("tbody",{children:t.map(((e,t)=>(0,i.jsx)("tr",{className:(0,s.Z)("border-b border-grey-200"),children:e.val.map(((t,a)=>(0,i.jsx)("td",{className:(0,s.Z)("h-[85px] px-3",0===a&&"pl-[30px]",a===e.val.length-1&&"pr-[30px]"),children:t},`row${e.key}cell${n[a]}`)))},`row${e.key}`)))})};function d(e){let{headings:t,rows:n,sort:s,reverse:a,handleHeaderClick:d}=e;return(0,i.jsx)(l,{children:(0,i.jsxs)(c,{children:[(0,i.jsx)(o,{headings:t,sort:s,reverse:a,handleHeaderClick:d}),(0,i.jsx)(r,{rows:n,headings:t})]})})}}}]);
//# sourceMappingURL=732.95f2db17.chunk.js.map