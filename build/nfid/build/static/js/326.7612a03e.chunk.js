"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[326],{77326:(e,t,a)=>{a.r(t),a.d(t,{default:()=>T});var s=a(87273),i=a(95163),l=a(69491),n=a(58688),r=a(55081),c=a(18414),o=a(4321),d=a(21325),m=a(6028),u=a(81754),p=a(55137),h=a(62055),v=a(47200),x=a(17974);const y=a.p+"static/media/transfer.aa5aafda7bf79e8e9214195fa4a83b20.svg";const f=a.p+"static/media/wallet.2257d98e066cc3b2ae3269b59e662065.svg";var g=a(33693);const b=e=>{switch(e.format){case"img":default:return(0,g.jsx)("div",{id:"asset-img",style:{backgroundImage:`url(${e.url})`},className:"relative z-20 h-full bg-center bg-no-repeat bg-contain"});case"iframe":return(0,g.jsx)("iframe",{title:"nft",frameBorder:"0",src:e.url,style:{zIndex:"20",border:"none",height:"100%",width:"100%",display:"block"}});case"video":return(0,g.jsx)("video",{id:"asset-video",src:e.url,autoPlay:!0,controls:!0,muted:!0})}},N=e=>{var t,a,i;let{nft:l,isTransactionsFetching:N=!1,transactions:j,applications:w}=e;const k=(0,s.useContext)(u.J),[,I]=(0,r.L)(k.transferService),Z=(0,s.useCallback)((e=>{e.preventDefault(),I({type:"ASSIGN_SELECTED_NFT",data:l.tokenId}),I({type:"CHANGE_TOKEN_TYPE",data:"nft"}),I({type:"CHANGE_DIRECTION",data:"send"}),I("SHOW")}),[l,I]);return(0,g.jsxs)(x.Z,{showBackButton:!0,headerMenu:(0,g.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,g.jsx)("img",{className:"transition-opacity cursor-pointer hover:opacity-50",src:y,alt:"transfer",onClick:Z}),(0,g.jsx)(p.C,{value:"Internet Computer"===l.blockchain?(0,m.p4)(l.collection.id,Number(l.index)):l.assetFullsize.url})]}),className:"w-full z-[1]",children:[(0,g.jsxs)("div",{className:(0,c.Z)("grid gap-[30px] max-w-[100vw]","grid-cols-1 sm:grid-cols-[auto,1fr]"),children:[(0,g.jsxs)("div",{className:"relative overflow-hidden bg-gray-50 rounded-xl h-full md:h-[342px] aspect-square",children:[(0,g.jsx)("div",{style:{backgroundImage:`url(${l.assetPreview})`},className:(0,c.Z)("bg-cover bg-center bg-no-repeat blur-md brightness-150","h-full absolute z-10 w-full opacity-70",("video"===l.assetFullsize.format||"iframe"===l.assetFullsize.format)&&"hidden")}),(0,g.jsx)(b,{url:l.assetFullsize.url,format:l.assetFullsize.format})]}),(0,g.jsxs)("div",{id:(0,o.S)("nft_token_",l.name+"_"+l.collection.id),children:[(0,g.jsx)("p",{className:"font-bold text-blue",id:(0,o.S)("nft_collection_",l.collection.id),children:l.collection.name}),(0,g.jsx)("p",{className:"text-[28px] mt-2.5",id:(0,o.S)("nft_token_",l.name),children:l.name}),"account"in l?(0,g.jsxs)("div",{className:"flex items-center mt-4 space-x-2",children:[(0,g.jsx)("img",{src:f,alt:"wallet"}),(0,g.jsx)("p",{className:"text-sm font-semibold text-secondary",id:`nft_wallet_${"NFID"===(null===l||void 0===l?void 0:l.walletName)?"NFIDWallet":null!==(t=null===(a=l.walletName)||void 0===a?void 0:a.split(" ").join(""))&&void 0!==t?t:(0,d.w)(w,l.principal.toString(),l.account.accountId).split(" ").join("")}`,children:"NFID"===(null===l||void 0===l?void 0:l.walletName)?"NFID Wallet":null!==(i=null===l||void 0===l?void 0:l.walletName)&&void 0!==i?i:(0,d.w)(w,l.principal.toString(),l.account.accountId)})]}):null,(0,g.jsx)(v.Z,{title:"Details",className:"mt-6",children:(0,g.jsx)("div",{className:"mt-5 space-y-4 text-sm",children:(0,g.jsxs)("div",{className:(0,c.Z)("grid grid-cols-1 sm:grid-cols-[100px,1fr] gap-5"),children:[(0,g.jsx)("p",{className:"mb-1 text-secondary",children:"Blockchain"}),(0,g.jsx)("p",{className:(0,c.Z)("w-full"),id:"nft_blockchain_",children:l.blockchain}),(0,g.jsx)("p",{className:"mb-1 text-secondary",children:"Standard"}),(0,g.jsx)("p",{id:"token-standard",className:(0,c.Z)("w-full"),children:"legacy"===l.collection.standard?"Legacy EXT":l.collection.standard}),(0,g.jsx)("p",{className:"mb-1 text-secondary",children:"NFT ID"}),(0,g.jsx)("p",{id:`nft_id_${l.tokenId.replace(/\s/g,"")}`,className:"w-full overflow-hidden",children:l.tokenId}),(0,g.jsx)("p",{className:"mb-1 text-secondary",children:"Collection ID"}),(0,g.jsx)("p",{id:"collection-id",className:"w-full overflow-hidden",children:l.contractId})]})})})]})]}),(0,g.jsx)("div",{className:(0,c.Z)("mt-[30px] max-w-[100vw]"),children:(0,g.jsx)(v.Z,{title:"About",children:(0,g.jsx)("p",{id:"token-about",className:"text-sm",children:l.collection.description.length?l.collection.description:"No description"})})}),(0,g.jsxs)("div",{className:(0,c.Z)("w-full","border border-gray-200 rounded-xl","my-[30px]",!j.length&&!N&&"hidden"),children:[(0,g.jsx)("div",{className:(0,c.Z)("ml-5 sm:ml-[30px]","mt-4 sm:mt-[26px]","mb-3 text-xl"),children:"Activity"}),(0,g.jsx)(h.ZP,{headings:["Event type","Date and time","From","To","Price"],rows:j.map((e=>({key:`${e.from}${e.to}${e.datetime}${e.type}`,val:Object.values(e).map(((e,t)=>(0,g.jsx)("span",{className:(0,c.Z)("text-sm",0===t&&"capitalize",(1===t||4===t)&&"whitespace-nowrap",(2===t||3===t)&&"w-[286px] break-words inline-block"),children:e})))})))}),(0,g.jsx)("div",{className:"flex justify-center w-full h-16 py-2",children:(0,g.jsx)(n.a,{fullscreen:!1,isLoading:N})})]})]})};var j=a(3209),w=a(22599);a(54915);var k=a(13791),I=a(57414);async function Z(e,t,a,s){let i=await Promise.all(Array.from(Array(s).keys()).slice(a,s).map((async a=>{let s=await async function(e,t){return I.CapRouter.init({}).then((t=>t.get_token_contract_root_bucket({tokenId:k.Principal.fromText(e)}))).then((t=>{if("undefined"===typeof t.canister[0])throw Error(`Psychedelic error. No root bucket for ${e}`);return t.canister[0].toText()})).then((e=>I.CapRoot.init({host:"https://ic0.app",canisterId:e}))).then((e=>e.get_transactions({page:t}))).then((e=>e.data.map((e=>(0,I.prettifyCapTransactions)(e)))))}(e,a);return{txHistory:s.filter((e=>e.details.token===t)),isLastPage:0===s.length}})));return i.reduce(((e,t)=>({txHistory:e.txHistory.concat(t.txHistory),isLastPage:e.isLastPage||t.isLastPage})))}const C=e=>{const[t,a]=(0,s.useState)([]),[i,l]=(0,s.useState)(!0),n=s.useCallback((async s=>{if(null===e||void 0===e||!e.contractId||null===e||void 0===e||!e.tokenId)return;let i;try{i=await Z(null===e||void 0===e?void 0:e.contractId,null===e||void 0===e?void 0:e.tokenId,10*s-10,10*s),console.debug(`fetchTokenHistory_${s}`,{result:i,NFTActivity:t})}catch(c){console.error("fetchTokenHistory",c)}if(!i)return void l(!1);const r=(e=>e.map((e=>{const t=e.details;return{type:e.operation,datetime:(0,j.Z)(new Date(Number(e.time)),"MMM dd, yyyy - hh:mm:ss aaa"),from:e.from||"",to:e.to||"",price:null!==t&&void 0!==t&&t.price&&null!==t&&void 0!==t&&t.price_currency&&null!==t&&void 0!==t&&t.price_decimals?`${Number(t.price)/10**Number(t.price_decimals)} ${t.price_currency}`:""}})))(i.txHistory);r.length&&a(t.concat(r)),!i.isLastPage&&t.length<5?n(s+1):l(!1)}),[t,null===e||void 0===e?void 0:e.contractId,null===e||void 0===e?void 0:e.tokenId]),r=s.useCallback((async()=>{if(null===e||void 0===e||!e.contractId||null===e||void 0===e||!e.tokenId)return;const t=await(async(e,t,a)=>await d.cH.getActivitiesByItem({contract:e,tokenId:t,size:a}))(e.contractId,e.tokenId,5);a(t.activities.map((e=>({type:e.type,datetime:(0,j.Z)(new Date(e.date),"MMM dd, yyyy - hh:mm:ss aaa"),from:e.from,to:e.to,price:e.price?`${e.price} ETH`:""})))),l(!1)}),[null===e||void 0===e?void 0:e.contractId,null===e||void 0===e?void 0:e.tokenId]),c=s.useCallback((async()=>{if(null===e||void 0===e||!e.contractId||null===e||void 0===e||!e.tokenId)return;const t=await(async(e,t,a)=>await d.Jt.getActivitiesByItem({contract:e,tokenId:t,size:a}))(e.contractId,e.tokenId,5);a(t.activities.map((e=>({type:e.type,datetime:(0,j.Z)(new Date(e.date),"MMM dd, yyyy - hh:mm:ss aaa"),from:e.from,to:e.to,price:e.price?`${e.price} MATIC`:""})))),l(!1)}),[e]);s.useEffect((()=>{t.length||("Internet Computer"===(null===e||void 0===e?void 0:e.blockchain)&&n(1),"Ethereum Goerli"===(null===e||void 0===e?void 0:e.blockchain)&&r(),"Polygon Mumbai"===(null===e||void 0===e?void 0:e.blockchain)&&c())}),[t.length,n,r,c,null===e||void 0===e?void 0:e.blockchain]);return{transactions:s.useMemo((()=>t.sort(((e,t)=>(0,w.Z)(t.datetime,"MMM dd, yyyy - hh:mm:ss aaa",new Date).getTime()-(0,w.Z)(e.datetime,"MMM dd, yyyy - hh:mm:ss aaa",new Date).getTime()))),[t]),isActivityFetching:i}},T=()=>{const e=(0,i.TH)().state,t=(0,l.pq)(),a=s.useMemo((()=>null===e||void 0===e?void 0:e.nft),[null===e||void 0===e?void 0:e.nft]),{transactions:r,isActivityFetching:c}=C(a);return a?(0,g.jsx)(N,{nft:a,isTransactionsFetching:c,transactions:r,applications:t.applicationsMeta||[]}):(0,g.jsx)(x.Z,{pageTitle:"Fetching NFT...",children:(0,g.jsx)(n.a,{isLoading:!0})})}},55137:(e,t,a)=>{a.d(t,{C:()=>o});var s=a(18414),i=a(87273),l=a(21882);const n=a.p+"static/media/copied.7db236d4ed9a8d82463d41f442395067.svg";const r=a.p+"static/media/copy.fa74bb78f3023163889b69dafbaee228.svg";var c=a(33693);const o=e=>{let{value:t,className:a}=e;const[o,d]=i.useState(!1),m=i.useCallback((()=>{d(!0),navigator.clipboard.writeText(t),setTimeout((()=>{d(!1)}),2e3)}),[t]);return(0,c.jsx)("div",{className:(0,s.Z)(!o&&"hover:opacity-50 cursor-pointer transition-opacity",a),children:(0,c.jsx)(l.u,{tip:"Copy",children:(0,c.jsx)("img",{className:"w-full",onClick:m,src:o?n:r,alt:"copy"})})})}},62055:(e,t,a)=>{a.d(t,{ZP:()=>d});var s=a(18414),i=(a(87273),a(17719)),l=a(33693);const n=e=>{let{children:t}=e;return(0,l.jsx)("div",{className:(0,s.Z)("overflow-x-scroll"),children:t})},r=e=>{let{children:t,className:a}=e;return(0,l.jsx)("table",{className:(0,s.Z)("w-full text-left min-w-[640px]",null!==a&&void 0!==a?a:"table-auto"),children:t})},c=e=>{let{sort:t,reverse:a,headings:n,handleHeaderClick:r}=e;return(0,l.jsx)("thead",{className:"contents",children:(0,l.jsx)("tr",{className:(0,s.Z)("border-b border-gray-900"),children:n.map(((e,n)=>(0,l.jsx)("th",{className:(0,s.Z)("h-16 px-3",0===n&&"pl-[30px]",n===e.length-1&&"pr-[30px]",(null===t||void 0===t?void 0:t.includes(e))&&"cursor-pointer hover:bg-gray-100"),onClick:()=>r&&r(e),children:(0,l.jsxs)("div",{className:(0,s.Z)("flex h-full gap-2 items-center group whitespace-nowrap"),children:[e,(null===t||void 0===t?void 0:t[0])===e&&(0,l.jsx)(i.CSs,{className:(0,s.Z)(a&&"rotate-180")}),(null===t||void 0===t?void 0:t.includes(e))&&(null===t||void 0===t?void 0:t[0])!==e&&(0,l.jsx)("div",{className:(0,s.Z)("invisible group-hover:visible"),children:(0,l.jsx)(i.CSs,{})})]})},`heading${e}`)))})})},o=e=>{let{rows:t,headings:a}=e;return(0,l.jsx)("tbody",{children:t.map(((e,t)=>(0,l.jsx)("tr",{className:(0,s.Z)("border-b border-grey-200"),children:e.val.map(((t,i)=>(0,l.jsx)("td",{className:(0,s.Z)("h-[85px] px-3",0===i&&"pl-[30px]",i===e.val.length-1&&"pr-[30px]"),children:t},`row${e.key}cell${a[i]}`)))},`row${e.key}`)))})};function d(e){let{headings:t,rows:a,sort:s,reverse:i,handleHeaderClick:d}=e;return(0,l.jsx)(n,{children:(0,l.jsxs)(r,{children:[(0,l.jsx)(c,{headings:t,sort:s,reverse:i,handleHeaderClick:d}),(0,l.jsx)(o,{rows:a,headings:t})]})})}},4321:(e,t,a)=>{function s(e,t){return e+t.replace(/\s|#/g,"")}a.d(t,{S:()=>s})},47200:(e,t,a)=>{a.d(t,{Z:()=>l});var s=a(18414),i=(a(87273),a(33693));const l=e=>{let{title:t,subTitle:a,children:l,className:n,showChildrenPadding:r=!0,id:c}=e;return(0,i.jsxs)("div",{id:c,className:(0,s.Z)("block border border-gray-200 rounded-xl","py-4 sm:py-[26px]",n),children:[(0,i.jsxs)("div",{className:"px-5",children:[t&&(0,i.jsx)("div",{className:"flex items-center justify-between mb-3 text-xl",children:t}),a&&(0,i.jsx)("div",{className:"flex items-center justify-between mb-4 text-sm leading-5 text-secondary",children:a})]}),(0,i.jsx)("div",{className:(0,s.Z)(r&&"px-5 sm:px-[30px]"),children:l})]})}}}]);
//# sourceMappingURL=326.7612a03e.chunk.js.map