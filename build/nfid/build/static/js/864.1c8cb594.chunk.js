"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[864],{48363:(e,t,s)=>{s.r(t),s.d(t,{default:()=>S});var l=s(69491),n=s(31577),a=s(55081),i=s(18414),c=s(87273),r=s(70799),o=s(95163),d=s(8439),u=s(82898),x=s(36516),p=s(78765),h=s(6028),m=s(3752),b=s(70079),v=s(62055),f=s(47200),j=s(72565),g=s(46520),k=s(33693);const N=e=>{let{state:t,setState:s}=e;return(0,k.jsxs)("div",{className:(0,i.Z)("gap-3 bg-white p-0.5 rounded-md","hidden sm:flex"),children:[(0,k.jsx)("div",{onClick:()=>s("grid"),className:(0,i.Z)("p-0 w-[36px] h-[36px] outline-none rounded-[4px]","hover:text-gray-100 transition-all cursor-pointer","flex justify-center items-center","grid"===t&&"bg-gray-200"),children:(0,k.jsx)(u.fJ,{className:(0,i.Z)("text-black","grid"!==t&&"!text-secondary")})}),(0,k.jsx)("div",{id:"to-table",onClick:()=>s("table"),className:(0,i.Z)("p-0 w-[36px] h-[36px] outline-none rounded-[4px]","hover:text-gray-100 transition-all cursor-pointer","flex justify-center items-center","table"===t&&"bg-gray-200"),children:(0,k.jsx)(u.B5,{className:(0,i.Z)("text-black","table"!==t&&"!text-secondary")})})]})},w=e=>{let{setBlockchainFilter:t,setCollectionsFilter:s,setWalletsFilter:l,blockchainOptions:n,collectionsOptions:a,walletOptions:i,blockchainFilter:c,collectionsFilter:r,walletsFilter:o}=e;return(0,k.jsxs)("div",{className:"space-y-2",children:[(0,k.jsx)(u.TV,{label:"Blockchain",options:n,selectedValues:c,setSelectedValues:t,id:"blockchain-filter"}),(0,k.jsx)(u.TV,{options:a,label:"Collections",setSelectedValues:s,selectedValues:r,isSearch:!0,bordered:!0}),(0,k.jsx)(u.TV,{options:i,label:"Accounts",setSelectedValues:l,selectedValues:o,isSearch:!0,bordered:!0})]})};class C{static searchDeepInArray(e,t,s){return e&&t?e.filter(this.containsDeep(t)).map((e=>{const l=Object.keys(e).length?Object.keys(e)[0]:null;return l?Object.assign({},e,{[l]:e[l].filter((e=>e[s].toLowerCase().indexOf(t.toLowerCase())>-1))}):e})):null}}C.containsDeep=e=>t=>{if(!t)return!1;const s=typeof t;return"string"===s?t.toLowerCase().indexOf(e.toLowerCase())>-1:Array.isArray(t)?t.some(C.containsDeep(e)):"object"===s&&Object.values(t).some(C.containsDeep(e))};const y={"Token #":(e,t)=>Number(e.index)-Number(t.index),Wallet:(e,t)=>e.account.label.toLowerCase()<t.account.label.toLowerCase()?-1:1,Collection:(e,t)=>e.collection.name.toLowerCase()<t.collection.name.toLowerCase()?-1:1,default:()=>0};function Z(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["Token #"];const s=y[t[0]];return s||console.warn(`Unknown sort method ${t[0]}`),e.sort(s||y.default)}const T=e=>{let{isLoading:t,tokens:s,applications:l}=e;const n=(0,c.useContext)(m.J),[,y]=(0,a.L)(n.transferService),[T,S]=c.useState(""),[_,I]=c.useState("grid"),[$,E]=c.useState([]),[O,F]=c.useState([]),[L,A]=c.useState([]),D=(0,o.s0)(),H=c.useMemo((()=>function(e,t){let s=e;if(t.search){const l=t.search;s=e.filter((e=>C.containsDeep(l)(e)))}return s}(s,{search:T}).filter((e=>!$.length||$.includes(e.principal.toText()))).filter((e=>!O.length||O.includes(e.collection.id))).filter((e=>!L.length||L.includes(e.blockchain)))),[s,T,$,O,L]),V=c.useMemo((()=>Object.values(function(e){return e.reduce(((e,t)=>{var s;return{...e,[t.collection.id]:{tokens:[...(null===(s=e[t.collection.id])||void 0===s?void 0:s.tokens)||[],t],collection:t.collection}}}),{})}(Z(s)))),[s]),[M,P]=c.useState(["Wallet","Collection","Token #"]),[W,G]=c.useState(!1),K=c.useCallback((()=>e=>{if(M.includes(e))if(M[0]===e)G(!W);else{const t=M.map((e=>e));t.splice(t.indexOf(e),1),t.unshift(e),P(t)}}),[M,W]),R=c.useCallback((e=>{const t=s.find((t=>t.tokenId===e));t&&(y({type:"ASSIGN_SELECTED_NFT",data:t}),y({type:"CHANGE_TOKEN_TYPE",data:"nft"}),y({type:"CHANGE_DIRECTION",data:"send"}),y("SHOW"))}),[y,s]),U=c.useMemo((()=>{const e=Z(H,M).map((e=>({key:e.tokenId,val:[(0,k.jsx)(d.rU,{to:`${g.Cb.base}/${g.Cb.assets}/${e.tokenId}`,state:{nft:e},children:(0,k.jsx)(u.Ee,{alt:`${e.collection.name} ${e.index}`,src:e.assetPreview,className:(0,i.Z)("w-[74px] h-[74px] object-cover rounded")})}),(0,k.jsxs)("div",{id:`nft_token_${e.name.replace(/\s|#/g,"")}`,children:[" ",e.name]}),(0,k.jsx)("div",{id:`nft_collection_${e.collection.name.replace(/\s/g,"")}`,className:(0,i.Z)("w-full"),children:e.collection.name}),(0,k.jsx)(d.rU,{to:`${g.Cb.base}/${g.Cb.assets}/${e.tokenId}`,className:"truncate block sm:w-[400px]",id:`nft_id_${e.tokenId.replace(/\s/g,"")}`,children:e.tokenId}),(0,k.jsx)("div",{className:(0,i.Z)("w-full"),id:`nft_wallet_${(0,p.w)(l,e.account.domain,e.account.accountId).replace(/\s/g,"")}`,children:(0,p.w)(l,e.account.domain,e.account.accountId)}),(0,k.jsxs)("div",{className:"flex items-center space-x-2.5 justify-center",children:[(0,k.jsx)(u.u,{tip:"Transfer",children:(0,k.jsx)(u.Jr,{"data-tip":"Transfer",className:"transition-opacity cursor-pointer hover:opacity-50",onClick:()=>R(e.tokenId)})}),(0,k.jsx)(u.CK,{value:"Internet Computer"===e.blockchain?(0,h.p4)(e.collection.id,Number(e.index)):e.assetFullsize.url})]})]})));return W&&e.reverse(),e}),[H,M,W,l,R]),B=c.useMemo((()=>{const e=Object.values(function(e){return e.reduce(((e,t)=>{var s;return{...e,[t.principal.toText()]:{tokens:[...(null===(s=e[t.principal.toText()])||void 0===s?void 0:s.tokens)||[],t],account:t.account,principal:t.principal.toText()}}}),{})}(V.map((e=>e.tokens)).flat())).filter((e=>!O.length||!!e.tokens.filter((e=>O.includes(e.collection.id))).length));return Object.values(e).map((e=>({label:(0,p.w)(l,e.account.domain,e.account.accountId),value:e.principal,afterLabel:e.tokens.filter((e=>!O.length||O.includes(e.collection.id))).length})))}),[l,O,V]),J=c.useMemo((()=>V.filter((e=>!$.length||!!e.tokens.filter((e=>$.includes(e.principal.toText()))).length)).map((e=>{var t;return{label:e.collection.name,value:e.collection.id,icon:null===(t=e.collection)||void 0===t?void 0:t.avatar}}))),[V,$]),z=c.useMemo((()=>x.DR.map((e=>({label:e,value:e})))),[]),Y=c.useCallback((()=>{A([]),F([]),E([])}),[]);return(0,k.jsx)(j.Z,{pageTitle:"Collectibles",icon:u.MA,iconTooltip:"Transactions history",onIconClick:()=>D(`${g.Cb.base}/${g.Cb.transactions}`),children:(0,k.jsxs)(f.Z,{className:(0,i.Z)("flex flex-col"),children:[(0,k.jsx)(f.Z,{className:(0,i.Z)("bg-gray-200 !py-5"),children:(0,k.jsxs)("div",{className:"flex items-center justify-between gap-6",children:[(0,k.jsx)(u.II,{type:"text",value:T,onChange:e=>S(e.currentTarget.value),icon:(0,k.jsx)(r.FKI,{size:"20"}),placeholder:"Search",inputClassName:"bg-white border-none",className:"w-full"}),(0,k.jsxs)("div",{className:(0,i.Z)("flex items-center space-x-6 shrink-0"),children:[(0,k.jsx)(u.EZ,{trigger:(0,k.jsx)("div",{id:"filter-nft",className:"flex items-center justify-center p-2 rounded-md md:bg-white",children:(0,k.jsx)(u.Z_,{className:"w-[21px] h-[21px] transition-opacity cursor-pointer hover:opacity-60"})}),onReset:Y,children:(0,k.jsx)(w,{collectionsOptions:J,setCollectionsFilter:F,collectionsFilter:O,walletOptions:B,setWalletsFilter:E,walletsFilter:$,blockchainFilter:L,setBlockchainFilter:A,blockchainOptions:z})}),(0,k.jsx)(N,{state:_,setState:I})]})]})}),(0,k.jsxs)("p",{id:"items-amount",className:"text-sm text-center text-secondary h-[50px] leading-[50px]",children:[H.length," items"]}),s.length?"table"===_?(0,k.jsx)(v.ZP,{rows:U,headings:["Asset","Name","Collection","ID","Account","Actions"],sort:M,reverse:W,handleHeaderClick:K}):(0,k.jsx)("div",{className:(0,i.Z)("grid gap-5 pb-5","grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4"),children:H.map((e=>(0,k.jsx)(b.Z,{...e},`token_${e.tokenId}`)))}):(0,k.jsx)(k.Fragment,{children:t?(0,k.jsx)(u.aN,{isLoading:!0}):"You have no NFTs!"})]})})},S=()=>{const{nfts:e}=(0,n.l)(),t=(0,l.pq)();return(0,k.jsx)(T,{isLoading:!e||t.isLoading,tokens:e||[],applications:t.applicationsMeta||[]})}},70079:(e,t,s)=>{s.d(t,{Z:()=>b});var l=s(55081),n=s(18414),a=s(87273),i=s(8439),c=s(96349),r=s(4321),o=s(82898),d=s(46520),u=s(3752),x=s(53211);const p=s.p+"static/media/copy.94e49d910f493b736e359de6b37bb776.svg";const h=s.p+"static/media/transfer.aa5aafda7bf79e8e9214195fa4a83b20.svg";var m=s(33693);const b=e=>{const t=(0,a.useContext)(u.J),[,s]=(0,l.L)(t.transferService),[b,v]=a.useState(!1),f=(0,x.Z)((()=>v(!1))),j=a.useCallback((t=>{var s;t.preventDefault(),c.Am.info("NFT URL copied to clipboard",{toastId:`copied_nft_${e.tokenId}`}),navigator.clipboard.writeText(null!==(s=e.clipboardText)&&void 0!==s?s:"")}),[e.clipboardText,e.tokenId]),g=(0,a.useCallback)((t=>{t.preventDefault(),s({type:"ASSIGN_SELECTED_NFT",data:e}),s({type:"CHANGE_TOKEN_TYPE",data:"nft"}),s({type:"CHANGE_DIRECTION",data:"send"}),s("SHOW")}),[e,s]);return(0,m.jsx)("div",{className:(0,n.Z)("rounded-md w-full transition-all cursor-pointer overflow-visible p-[1px] relative z-10","bg-gray-50 hover:bg-white hover:shadow-[0_2px_15px_rgba(0,0,0,0.1)] nft"),children:(0,m.jsxs)(i.rU,{to:`${d.Cb.base}/${d.Cb.assets}/${e.tokenId}`,state:{nft:e},children:[(0,m.jsx)("div",{className:(0,n.Z)("flex items-center justify-center","absolute w-6 h-6 bg-white rounded-full right-2.5 top-[215px] md:top-[270px]"),children:(0,m.jsx)(o.Ee,{src:e.blockchainLogo,alt:"logo",className:(0,n.Z)("w-2/3","Internet Computer"!==e.blockchain&&"!w-auto h-2/3")})}),(0,m.jsx)(o.Ee,{className:(0,n.Z)("rounded-[5px] w-full h-[245px] md:h-[300px] object-cover"),src:e.assetPreview,alt:e.name}),(0,m.jsxs)("div",{className:(0,n.Z)("text-sm p-2.5 flex justify-between items-end"),children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{id:(0,r.S)("nft_token_",e.name),className:(0,n.Z)("font-bold"),children:e.name}),(0,m.jsx)("div",{id:(0,r.S)("nft_collection_",e.collection.name),className:(0,n.Z)("text-secondary truncate w-[190px] mt-1"),children:e.collection.name})]}),(0,m.jsxs)("div",{className:"relative w-6",ref:f,children:[(0,m.jsx)(o.K_,{className:(0,n.Z)("text-secondary cursor-pointer hover:text-black","rotate-90"),onClick:e=>{e.preventDefault(),v(!b)}}),(0,m.jsxs)("div",{className:(0,n.Z)("absolute top-6 right-0 w-[150px]","bg-white rounded-md shadow-md","text-sm",!b&&"hidden"),children:[(0,m.jsxs)("div",{onClick:g,className:(0,n.Z)("pl-[10px] leading-10 hover:bg-gray-100 rounded-md","flex items-center space-x-2"),children:[(0,m.jsx)(o.Ee,{src:h,alt:""}),(0,m.jsx)("span",{children:"Transfer"})]}),(0,m.jsxs)("div",{onClick:j,className:(0,n.Z)("pl-[10px] leading-10 hover:bg-gray-100 rounded-md","flex items-center space-x-2"),children:[(0,m.jsx)(o.Ee,{src:p,alt:""}),(0,m.jsx)("span",{children:" Copy link"})]})]})]})]})]})})}},62055:(e,t,s)=>{s.d(t,{W8:()=>c,ZP:()=>d,ss:()=>r,y6:()=>i});var l=s(18414),n=(s(87273),s(17719)),a=s(33693);const i=e=>{let{children:t}=e;return(0,a.jsx)("div",{className:(0,l.Z)("overflow-x-scroll"),children:t})},c=e=>{let{children:t,className:s}=e;return(0,a.jsx)("table",{className:(0,l.Z)("w-full text-left min-w-[640px]",null!==s&&void 0!==s?s:"table-auto"),children:t})},r=e=>{let{sort:t,reverse:s,headings:i,handleHeaderClick:c}=e;return(0,a.jsx)("thead",{className:"contents",children:(0,a.jsx)("tr",{className:(0,l.Z)("border-b border-gray-900"),children:i.map(((e,i)=>(0,a.jsx)("th",{className:(0,l.Z)("h-16 px-3",0===i&&"pl-[30px]",i===e.length-1&&"pr-[30px]",(null===t||void 0===t?void 0:t.includes(e))&&"cursor-pointer hover:bg-gray-100"),onClick:()=>c&&c(e),children:(0,a.jsxs)("div",{className:(0,l.Z)("flex h-full gap-2 items-center group whitespace-nowrap"),children:[e,(null===t||void 0===t?void 0:t[0])===e&&(0,a.jsx)(n.CSs,{className:(0,l.Z)(s&&"rotate-180")}),(null===t||void 0===t?void 0:t.includes(e))&&(null===t||void 0===t?void 0:t[0])!==e&&(0,a.jsx)("div",{className:(0,l.Z)("invisible group-hover:visible"),children:(0,a.jsx)(n.CSs,{})})]})},`heading${e}`)))})})},o=e=>{let{rows:t,headings:s}=e;return(0,a.jsx)("tbody",{children:t.map(((e,t)=>(0,a.jsx)("tr",{className:(0,l.Z)("border-b border-grey-200"),children:e.val.map(((t,n)=>(0,a.jsx)("td",{className:(0,l.Z)("h-[85px] px-3",0===n&&"pl-[30px]",n===e.val.length-1&&"pr-[30px]"),children:t},`row${e.key}cell${s[n]}`)))},`row${e.key}`)))})};function d(e){let{headings:t,rows:s,sort:l,reverse:n,handleHeaderClick:d}=e;return(0,a.jsx)(i,{children:(0,a.jsxs)(c,{children:[(0,a.jsx)(r,{headings:t,sort:l,reverse:n,handleHeaderClick:d}),(0,a.jsx)(o,{rows:s,headings:t})]})})}},4321:(e,t,s)=>{function l(e,t){return e+t.replace(/\s|#/g,"")}s.d(t,{S:()=>l})},47200:(e,t,s)=>{s.d(t,{Z:()=>a});var l=s(18414),n=(s(87273),s(33693));const a=e=>{let{title:t,subTitle:s,children:a,className:i,showChildrenPadding:c=!0,id:r}=e;return(0,n.jsxs)("div",{id:r,className:(0,l.Z)("block border border-gray-200 rounded-xl","py-4 sm:py-[26px]",i),children:[(0,n.jsxs)("div",{className:"px-5",children:[t&&(0,n.jsx)("div",{className:"flex items-center justify-between mb-3 text-xl",children:t}),s&&(0,n.jsx)("div",{className:"flex items-center justify-between mb-4 text-sm leading-5 text-secondary",children:s})]}),(0,n.jsx)("div",{className:(0,l.Z)(c&&"px-5 sm:px-[30px]"),children:a})]})}}}]);
//# sourceMappingURL=864.1c8cb594.chunk.js.map