"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[651],{13485:(n,e,t)=>{t.d(e,{Z:()=>o});t(87273);const o=t.p+"static/media/dfinity.583ab84ba16070ca501453d1e291dff4.svg"},19864:(n,e,t)=>{t.d(e,{i:()=>a});var o=t(94244),c=t(8708);const a=()=>{const{data:n,isValidating:e}=(0,o.ZP)("dip20AllToken",c.o4,{dedupingInterval:36e5,focusThrottleInterval:36e5});return console.debug("useAllDip20Token",{token:n}),{token:n,isValidating:e}}},43185:(n,e,t)=>{t.d(e,{G:()=>a});var o=t(94244),c=t(76510);const a=()=>{const{data:n,...e}=(0,o.ZP)("walletExchangeRate",c.f,{dedupingInterval:36e5,focusThrottleInterval:36e5,refreshInterval:36e5});return{exchangeRate:n,...e}}},14868:(n,e,t)=>{t.d(e,{j:()=>r});var o=t(94244),c=t(94159),a=t(65794),i=t(19864);const r=()=>{const{principals:n}=(0,a.J)(),{token:e}=(0,i.i)(),{data:t,isValidating:r,mutate:s}=(0,o.ZP)(e&&n?[n,e,"AllBalanceRaw"]:null,(async n=>{let[e,t]=n;return console.debug("AllBalanceRaw",{principals:e,dip20Token:t}),await(0,c.J4)({principals:e,dip20Token:t})}),{dedupingInterval:3e4,refreshInterval:6e4});return{balances:t,isLoading:r,refreshBalances:s}}},90651:(n,e,t)=>{t.d(e,{O:()=>R});var o=t(87273),c=t(628),a=t(27387),i=t(21325),r=t(59362);class s{constructor(n){this.config=void 0,this.getIdentity=async n=>{const{delegationIdentity:e}=i.fD.get(),t=(await(0,r.y)()).getPrincipal().toString();if(!e)throw Error("Delegation identity error");return null===n||void 0===n||!n.length||null!==n&&void 0!==n&&n.includes(t)?[e]:[]},this.config=n}async getTokenConfigs(n){const e=await this.getIdentity(n.map((n=>n.principal)));return 0===e.length?[]:this.getAccounts(e)}getTokenStandard(){return`${this.config.tokenStandard}&${this.config.blockchain}`}getCacheTtl(){return 30}}var l=t(51921),u=t(7863);function d(n,e){var t;return{icon:n.icon,tokenStandard:n.tokenStandard,title:e.label,currency:n.feeCurrency,balance:null===e||void 0===e?void 0:e.tokenBalance,price:null===e||void 0===e?void 0:e.usdBalance,fee:BigInt(null!==(t=null===e||void 0===e?void 0:e.fee)&&void 0!==t?t:0),toPresentation:u.T9,transformAmount:l.Q,blockchain:n.blockchain}}function g(n,e){return{tokenStandard:n.tokenStandard,icon:e.icon,title:`${e.label} ${n.network?`${n.network}`:""}`,currency:e.token,balance:e.tokenBalance,price:e.usdBalance,blockchain:n.blockchain,fee:BigInt(0),toPresentation:u.T9,transformAmount:l.Q,feeCurrency:n.feeCurrency,contract:e.contract}}var h=t(96215),p=t(21882),k=t(33368);const f=new class extends s{async getAccounts(n){return a.S.getRootAccount(n[0],p.JX).then((n=>[d(this.config,n)]))}}({icon:p.JX,tokenStandard:k.v.BTC,title:"Bitcoin",feeCurrency:h.Iu.BTC,blockchain:h.$O.BITCOIN,network:h.jH.MAINNET});const v=new class extends s{async getAccounts(n){return i.q_.getAccounts(n[0],this.config.icon).then((n=>n.map((n=>g(this.config,n)))))}}({tokenStandard:k.v.ERC20_ETHEREUM,blockchain:h.$O.ETHEREUM,feeCurrency:h.Iu.ETH,icon:p.wJ,network:h.P$.MAINNET});const I=new class extends s{async getAccounts(n){return i.q_.getNativeAccount(n[0],this.config.icon).then((n=>[d(this.config,n)]))}}({icon:p.kD,tokenStandard:k.v.ETH,title:"Ethereum",feeCurrency:h.Iu.ETH,blockchain:h.$O.ETHEREUM,network:h.P$.MAINNET});const C=new class extends s{async getAccounts(n){return i.It.getAccounts(n[0],this.config.icon).then((n=>n.map((n=>g(this.config,n)))))}}({tokenStandard:k.v.ERC20_POLYGON,icon:p.gh,blockchain:h.$O.POLYGON,feeCurrency:h.Iu.MATIC,network:h.PR.MAINNET});const y=new class extends s{async getAccounts(n){return i.It.getNativeAccount(n[0],this.config.icon).then((n=>[d(this.config,n)]))}}({icon:p.u3,tokenStandard:k.v.MATIC,title:"Matic",feeCurrency:h.Iu.MATIC,blockchain:h.$O.POLYGON,network:h.PR.MAINNET});const A=new class extends s{async getAccounts(n){return i.cH.getAccounts(n[0],this.config.icon).then((n=>n.map((n=>g(this.config,n)))))}}({tokenStandard:k.v.ERC20_ETHEREUM,blockchain:h.$O.ETHEREUM_GOERLI,feeCurrency:h.Iu.ETH,icon:p.wJ,network:h.P$.GOERLI});const T=new class extends s{async getAccounts(n){return i.cH.getNativeAccount(n[0],this.config.icon).then((n=>[d(this.config,n)]))}}({icon:p.kD,tokenStandard:k.v.ETH,title:"Ethereum Goerli",feeCurrency:h.Iu.ETH,blockchain:h.$O.ETHEREUM_GOERLI,network:h.P$.GOERLI});const E=new class extends s{async getAccounts(n){return i.Jt.getAccounts(n[0],this.config.icon).then((n=>n.map((n=>g(this.config,n)))))}}({tokenStandard:k.v.ERC20_POLYGON,icon:p.gh,blockchain:h.$O.POLYGON_MUMBAI,feeCurrency:h.Iu.MATIC,network:h.PR.MUMBAI});const b=new class extends s{async getAccounts(n){return i.Jt.getNativeAccount(n[0],this.config.icon).then((n=>[d(this.config,n)]))}}({icon:p.u3,tokenStandard:k.v.MATIC,title:"Matic Mumbai",feeCurrency:h.Iu.MATIC,blockchain:h.$O.POLYGON_MUMBAI,network:h.PR.MUMBAI});class w extends c.m{constructor(){super(...arguments),this.getTokenConfigs=async(n,e)=>super.process(n,[e])}getCacheKey(n,e,t){return e.name+n+t[0].reduce(((n,e)=>{let{principal:t}=e;return`${n}${t}`}),"")}getFunctionToCall(n){return n.getTokenConfigs}}const P=new w([f,y,C,v,I,b,E,A,T]);var m=t(94244);const M=n=>{let{assetFilters:e,tokens:t}=n;const{data:o,...c}=(0,m.ZP)([t,e,"tokenConfig"],(n=>{let[e,t]=n;return Promise.all(e.map((async n=>{try{return await P.getTokenConfigs(n,t)}catch(e){return console.error("useTokenConfig",e),[]}})))}));return{configs:(null===o||void 0===o?void 0:o.flat())||[],...c}},R=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const e=P.getKeys(),{configs:t}=M({tokens:e,assetFilters:n}),c=(0,r.U)(n),a=o.useMemo((()=>[...t,...c].sort(((n,e)=>n.currency.localeCompare(e.currency)))),[t,c]);return console.debug("useAllToken",{token:a}),{token:a}}},65794:(n,e,t)=>{t.d(e,{J:()=>r});var o=t(87273),c=t(72422),a=t(21325),i=t(69491);const r=()=>{const{profile:n}=(0,i.Un)(),{accounts:e}=(0,i.xe)(),{applicationsMeta:t}=(0,i.pq)(),r=o.useMemo((()=>(0,a.XZ)(e,t)),[e,t]),{data:s}=(0,c.Z)(null!==n&&void 0!==n&&n.anchor&&r?[BigInt(n.anchor),r,n.wallet===a.TD.NFID]:null,(n=>{let[e,t,o]=n;return(0,a.bt)(e,t,o)}),{dedupingInterval:6e4,refreshInterval:6e4});return console.debug("useAllPrincipals",{principals:s}),{principals:s}}},628:(n,e,t)=>{t.d(e,{m:()=>o});class o{constructor(n){this.connectors=void 0,this.connectorsStorage=void 0,this.connectors=n,this.connectorsStorage=this.toMap(this.connectors)}getKeys(){return Array.from(this.connectorsStorage.keys())}async process(n,e){const t=this.getConnector(n);if(!t)throw Error(n+" not supported");return await this.getFunctionToCall(t).apply(t,e)}toMap(n){const e=new Map;return n.forEach((n=>{e.set(n.getTokenStandard(),n)})),e}getConnector(n){return this.connectorsStorage.get(n)}}},59362:(n,e,t)=>{t.d(e,{y:()=>I,U:()=>v});var o=t(52259),c=t(19864),a=t(87273),i=t(7863),r=t(13485),s=t(69491),l=t(75557),u=t(43185),d=t(14868);var g=t(51921),h=t(96215),p=t(21882),k=t(21325),f=t(33368);const v=n=>{const{appAccountBalance:e}=function(){let n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1?arguments[1]:void 0;const{applicationsMeta:t}=(0,s.pq)(),{exchangeRate:o,isValidating:g}=(0,u.G)(),{token:h}=(0,c.i)(),{balances:p,isLoading:k}=(0,d.j)();console.debug("useUserBalances",{icpBalance:p});const f=a.useMemo((()=>{if(!g&&!k&&o&&p)return{ICP:(0,l.RJ)({balances:null!==e&&void 0!==e&&e.length?p.filter((n=>null===e||void 0===e?void 0:e.find((e=>e.principal===n.principal.toString())))):p,applications:t,exchangeRate:o,excludeEmpty:n,includeEmptyApps:["nfid.one","https://nns.ic0.app"],label:"Internet Computer",token:"ICP",icon:r.Z,toPresentation:i.T9}),...h?h.reduce(((c,a)=>{let{symbol:i,name:r,logo:s,toPresentation:u}=a;return{...c,[i]:(0,l.RJ)({toPresentation:u,balances:null!==e&&void 0!==e&&e.length?p.filter((n=>null===e||void 0===e?void 0:e.find((e=>e.principal===n.principal.toString())))):p,applications:t,icon:s,exchangeRate:"WICP"===i?o:0,excludeEmpty:n,includeEmptyApps:["nfid.one","https://nns.ic0.app"],label:r,token:i})}}),{}):{}}}),[g,k,o,p,e,t,n,h]);return console.debug("useBalanceICPAll",{isLoadingICPExchangeRate:g,isLoadingPrincipals:k,exchangeRate:o,applicationsMeta:t,appAccountBalance:f,balanceICPRaw:p}),{isLoading:k||g,appAccountBalance:f}}(!0,n),{token:t}=(0,c.i)();return[{icon:p.UC,tokenStandard:f.v.ICP,title:"Internet Computer",currency:"ICP",balance:null===e||void 0===e?void 0:e.ICP.tokenBalance,price:null===e||void 0===e?void 0:e.ICP.usdBalance,fee:BigInt(i.dH),toPresentation:i.T9,transformAmount:g.Q,blockchain:h.$O.IC},...(t?t.map((n=>{let{symbol:t,name:o,logo:c,...a}=n;return{tokenStandard:f.v.DIP20,icon:c,title:o,currency:t,balance:null===e||void 0===e?void 0:e[t].tokenBalance,price:null===e||void 0===e?void 0:e[t].usdBalance,blockchain:h.$O.IC,...a}})):[]).filter((n=>n.balance>0))]},I=async()=>{const{delegationIdentity:n}=k.fD.get();return await(0,o.iu)(n,o.qo.IC,k.KH)}}}]);
//# sourceMappingURL=651.4cbe8a4a.chunk.js.map