"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[627],{84625:(e,s,t)=>{t.r(s),t.d(s,{VaultTransactionsDetailsPage:()=>g,default:()=>b});var r=t(18414),l=t(87273),i=t(95163),n=t(96349),a=t(82898),d=t(78765),o=t(27024),c=t(72565),u=t(45482),x=t(76058),m=t(33693);const v=e=>{let{title:s,value:t,direction:l="right"}=e;return(0,m.jsxs)("div",{className:(0,r.Z)("flex","left"===l&&"flex-row-reverse"),children:[(0,m.jsxs)("div",{className:"w-full px-8 py-5 text-gray-600 rounded-l-lg bg-gray-50",children:[(0,m.jsx)("p",{className:"font-bold tracking-[0.01em] mb-3",children:s}),(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)(x.M,{value:t,leadingChars:20,trailingChars:10}),(0,m.jsx)(a.CK,{className:"ml-3 text-secondary",value:t})]})]}),(0,m.jsx)("div",{className:(0,r.Z)("hidden md:block border-l-[56px] border-t-[40px] border-b-[40px]","border-l-gray-50 border-t-transparent border-b-transparent","left"===l&&"rotate-180")})]})},p=e=>{let{title:s,content:t,titleClassName:l}=e;return(0,m.jsxs)("div",{className:(0,r.Z)("grid grid-cols-[160px,1fr] w-full text-sm","border-b-[1px] border-gray-100 min-h-[48px]","items-center py-1"),children:[(0,m.jsx)("div",{className:(0,r.Z)("text-secondary",l),children:s}),(0,m.jsx)("div",{children:t})]})},h=e=>{let{error:s}=e;return(0,m.jsxs)(a.TK,{large:!0,title:"Transaction status details",secondaryButton:{type:"primary",onClick:()=>{},text:"Close",block:!0},trigger:(0,m.jsx)("div",{className:"cursor-pointer text-blue",children:"Details"}),children:[(0,m.jsx)("p",{className:"text-sm",children:"Text describing the reason for rejection. NFID is a privacy-preserving, one-touch multi-factor wallet protocol developed by Internet Identity Labs."}),(0,m.jsx)("p",{className:"mt-6 mb-1 text-xs",children:"Error details"}),(0,m.jsx)("div",{className:(0,r.Z)("border rounded-md border-red ring-[3px] ring-red-100","py-2 px-2.5 font-mono text-secondary text-sm min-h-[200px]"),children:s})]})},j=e=>{let{state:s}=e;return(0,m.jsx)("div",{className:(0,r.Z)("absolute -translate-x-1/2 left-1/2 top-1/2 -translate-y-1/2","-rotate-90 md:rotate-180 rounded-full text-white","flex items-center justify-center","w-10 h-10 md:w-14 md:h-14",s===d.g7.PENDING&&"bg-amber-500",s===d.g7.APPROVED&&"bg-emerald-500",s===d.g7.REJECTED&&"bg-red-500",s===d.g7.CANCELED&&"bg-gray-500"),children:(0,m.jsx)(a.sK,{})})},g=()=>{var e,s,t;const[x,g]=(0,l.useState)(!1),[b,f]=(0,l.useState)(),N=(0,i.TH)();(0,l.useEffect)((()=>{f(N.state)}),[N.state]);const y=(0,l.useCallback)((async e=>{if(null!==b&&void 0!==b&&b.id)try{g(!0),await(0,d.Jz)({transactionId:b.id,state:e}),window.history.back()}catch(s){console.log({e:s}),n.Am.error(s.message)}finally{g(!1)}}),[null===b||void 0===b?void 0:b.id]);return(0,m.jsxs)(c.Z,{isLoading:x,pageTitle:"Transaction details",showBackButton:!0,children:[(0,m.jsxs)("div",{className:"relative flex flex-col md:flex-row",children:[(0,m.jsx)("div",{className:"w-full md:w-1/2",children:(0,m.jsx)(v,{title:`From: ${null===b||void 0===b?void 0:b.fromWalletName}`,value:null!==(e=null===b||void 0===b?void 0:b.fromAddress)&&void 0!==e?e:"",direction:"right"})}),(0,m.jsx)("div",{className:"w-full md:w-1/2 mt-[10px] md:mt-0",children:(0,m.jsx)(v,{title:"To:",value:null!==(s=null===b||void 0===b?void 0:b.toAddress)&&void 0!==s?s:"",direction:"left"})}),(0,m.jsx)(j,{state:null===b||void 0===b?void 0:b.status})]}),(0,m.jsxs)("div",{className:"flex items-center justify-between mb-8 mt-7",children:[(0,m.jsx)("p",{className:"text-xl font-bold",children:"Details"}),(0,m.jsxs)("div",{className:(0,r.Z)("flex items-center text-blue-600 cursor-pointer",(null===b||void 0===b?void 0:b.status)!==d.g7.APPROVED&&"hidden"),children:[(0,m.jsx)("p",{className:"mr-2 text-sm font-bold",children:"View on block explorer"}),(0,m.jsx)(a.h_,{})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)(p,{title:"Tokens",content:(0,m.jsxs)("div",{children:[(0,m.jsxs)("p",{children:[null===b||void 0===b?void 0:b.amountICP," ICP"]}),(0,m.jsxs)("p",{className:"text-xs text-secondary",children:["\u2248",null===b||void 0===b?void 0:b.amountUSD]})]})}),(0,m.jsx)(p,{title:"Initiated by",content:`${null===b||void 0===b?void 0:b.ownerName} ${null!==b&&void 0!==b&&b.isInitiatedByYou?"(You)":""}`}),(0,m.jsx)(p,{title:"Date and time",content:null===b||void 0===b?void 0:b.createdDate}),(0,m.jsx)(p,{title:"Status",content:(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsx)(a.Ct,{type:u.k[null!==(t=null===b||void 0===b?void 0:b.status)&&void 0!==t?t:"CANCELED"],children:null===b||void 0===b?void 0:b.status}),null!==b&&void 0!==b&&b.memo?(0,m.jsx)(h,{error:null===b||void 0===b?void 0:b.memo}):null]})}),(0,m.jsx)(p,{title:"Approvals",titleClassName:"align-top h-full mt-1",content:(0,m.jsx)(o.U,{className:"!p-0 text-secondary",titleClassName:"!text-sm font-normal text-black",detailsClassName:"mt-2",title:`${null===b||void 0===b?void 0:b.approvers.filter((e=>e.isApproved)).length} of ${null===b||void 0===b?void 0:b.memberThreshold}`,isBorder:!1,details:(0,m.jsx)("div",{className:"grid grid-cols-1 text-sm sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:null===b||void 0===b?void 0:b.approvers.map(((e,s)=>(0,m.jsxs)("div",{className:"flex items-center h-10",children:[(0,m.jsx)("span",{className:(0,r.Z)("w-2 h-2 rounded-full mr-2.5 bg-gray-100",e.isApproved&&"bg-emerald-500")}),(0,m.jsx)("p",{children:e.name})]},`approver_${e.name}_${s}`)))})})}),(0,m.jsxs)("div",{className:(0,r.Z)("flex justify-end mt-5",(null===b||void 0===b?void 0:b.status)!==d.g7.PENDING&&"hidden"),children:[(0,m.jsx)(a.zx,{onClick:()=>y(d.g7.REJECTED),className:(0,r.Z)(!(null!==b&&void 0!==b&&b.isApprovedByYou)&&"hidden"),type:"primary",children:"Cancel transaction"}),(0,m.jsx)(a.zx,{onClick:()=>y(d.g7.REJECTED),className:(0,r.Z)("mr-5",(null===b||void 0===b?void 0:b.isApprovedByYou)&&"hidden"),type:"stroke",children:"Rejected"}),(0,m.jsx)(a.zx,{onClick:()=>y(d.g7.APPROVED),className:(0,r.Z)((null===b||void 0===b?void 0:b.isApprovedByYou)&&"hidden"),type:"primary",children:"Approve"})]})]})]})},b=g},45482:(e,s,t)=>{t.d(s,{_:()=>u,k:()=>c});var r=t(87273),l=t(95163),i=t(96349),n=t(82898),a=t(46520),d=t(76058),o=t(33693);let c;!function(e){e.APPROVED="success",e.PENDING="warning",e.CANCELED="cancel",e.REJECTED="error"}(c||(c={}));const u=e=>{var s;const t=(0,l.s0)(),u=(0,r.useCallback)((()=>{t(`${a.Cb.base}/${a.Cb.vaults}/transactions/${e.id}`,{state:e})}),[t,e]),x=(0,r.useCallback)(((e,s)=>{e.stopPropagation(),navigator.clipboard.writeText(s),i.Am.success("Address copied to clipboard")}),[]);return(0,o.jsxs)(n.SC,{className:"space-x-5 hover:bg-gray-100",onClick:u,children:[(0,o.jsx)(n.pj,{isLeft:!0,children:e.number}),(0,o.jsx)(n.pj,{children:e.ownerName}),(0,o.jsx)(n.pj,{className:"hover:text-secondary",onClick:s=>x(s,e.fromAddress),children:(0,o.jsx)(n.u,{tip:"Copy to clipboard",children:(0,o.jsx)("span",{children:e.fromWalletName})})}),(0,o.jsx)(n.pj,{className:"hover:text-secondary",onClick:s=>x(s,e.toAddress),children:(0,o.jsx)(n.u,{tip:"Copy to clipboard",children:(0,o.jsx)(d.M,{value:e.toAddress,leadingChars:9,trailingChars:3})})}),(0,o.jsxs)(n.pj,{children:[(0,o.jsxs)("p",{children:[null===(s=e.amountICP)||void 0===s?void 0:s.toString()," ICP"]}),(0,o.jsx)("p",{className:"text-xs text-secondary",children:e.amountUSD})]}),(0,o.jsx)(n.pj,{children:(0,o.jsx)(n.Ct,{type:c[e.status],children:e.status})}),(0,o.jsx)(n.pj,{isRight:!0,children:(0,o.jsx)(n.xz,{className:"ml-auto text-secondary"})})]})}},55081:(e,s,t)=>{t.d(s,{L:()=>o});var r=t(87273),l=t(68682),i=t(49371),n=t(98740);function a(e){return"deferred"in e}function d(e){return"getSnapshot"in e?e.getSnapshot():function(e){return"state"in e}(e)?e.state:void 0}function o(e,s){void 0===s&&(s=d);var t=(0,r.useRef)(e),o=(0,r.useRef)([]),c=(0,r.useCallback)((function(s){return e.subscribe(s).unsubscribe}),[e]),u=(0,r.useCallback)((function(){return s(e)}),[e,s]),x=(0,n.useSyncExternalStore)(c,u,u),m=(0,i.Z)((function(){return function(){for(var e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];var r=e[0];var l=t.current;a(l)&&l.deferred?o.current.push(r):l.send(r)}}));return(0,l.Z)((function(){for(t.current=e;o.current.length>0;){var s=o.current.shift();e.send(s)}}),[e]),[x,m]}}}]);
//# sourceMappingURL=627.c03c2ad0.chunk.js.map