"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[203],{96203:(e,r,s)=>{s.r(r),s.d(r,{AppScreenRecoverNFID:()=>f,default:()=>N});var a=s(9516),i=s(87273),o=s(4039),l=s(44190),n=s(18414),t=s(84463),c=s(21882);var d=s(74912),h=s(21699),v=s(58688),g=s(12939),u=s(45373),m=s(33693);const y=e=>{var r;let{className:s,toggle:a,isVerifiedDomain:o,onRecover:l,isLoading:y,responseError:p}=e;const{register:x,formState:{errors:f},setError:N,handleSubmit:j}=(0,t.cI)({mode:"all"});i.useEffect((()=>{p&&N("recoveryPhrase",{type:"manual",message:p})}),[p,N]);return(0,m.jsx)(u.q,{isFocused:!0,showLogo:!0,children:(0,m.jsx)("main",{className:(0,n.Z)("flex flex-1"),children:(0,m.jsx)("div",{className:(0,n.Z)(h.S),children:(0,m.jsx)("div",{className:"grid h-full grid-cols-12",children:(0,m.jsx)("div",{className:"flex flex-col col-span-12 md:col-span-11 lg:col-span-7",children:(0,m.jsx)("div",{className:(0,n.Z)("",s),children:(0,m.jsxs)("div",{children:[(0,m.jsx)(g.H2,{className:"mb-4",children:"Recover NFID"}),(0,m.jsx)("div",{className:(0,n.Z)("mb-6"),children:"Paste your recovery phrase here to proceed:"}),(0,m.jsx)(c.Kx,{rows:6,errorText:null===f||void 0===f||null===(r=f.recoveryPhrase)||void 0===r?void 0:r.message,...x("recoveryPhrase",{required:{value:!0,message:"Please enter your Recovery Phrase"},onChange:e=>{e.target.value=(e=>{let r=e.replace(/\r?\n|\r/g," ");return r=r.replace(/[^a-zA-Z0-9 ]/g,""),r})(e.target.value)}})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("input",{type:"checkbox",id:"has-verified-domain",className:"rounded",onChange:a,checked:o}),(0,m.jsx)("label",{htmlFor:"has-verified-domain",className:"ml-2",children:"I got to this screen by first going to https://nfid.one, being redirected to this landing page, and following the link to recover my NFID."})]}),(0,m.jsx)(d.z,{primary:!0,large:!0,className:"my-4",id:"recovery-button",onClick:j(l),disabled:!o,children:"Recover"}),(0,m.jsx)(v.a,{isLoading:y})]})})})})})})})};var p=s(19511),x=s(1719);const f=e=>{let{registerDeviceDeciderPath:r,isVerifiedDomainDefault:s}=e;const[n,t]=(0,i.useState)(null),[c,d]=i.useReducer((e=>!e),!!s),{refreshProfile:h}=(0,o.m)(),{navigate:v}=(0,p.Z)(),{loginWithRecovery:g,isLoading:u}=(0,x.J)(),f=i.useCallback((async e=>{var s;const i=e.recoveryPhrase.replace(/\s+/g," ").trim(),o=i.split(" ")[0],n=(0,l.y)(o),c=i.split(`${n} `)[1];if(!n)return t("Invalid Recovery Phrase (missing Anchor)");let d=null;try{t(""),d=await g(c,n),await h()}catch(y){var u,m;return console.error(y),t(null!==(u=null===y||void 0===y||null===(m=y.message)||void 0===m?void 0:m.length)&&void 0!==u?u:"We cannot restore your NFID with this recovery phrase. Please check it and try again.")}if("ok"!==(null===(s=d)||void 0===s?void 0:s.tag))return t("We cannot restore your NFID with this recovery phrase. Please check it and try again.");a.av({id:n.toString()}),v(r,{state:{userNumber:n}})}),[g,v,h,r]);return(0,m.jsx)(y,{onRecover:f,toggle:d,isVerifiedDomain:c,responseError:n,isLoading:u})},N=f}}]);
//# sourceMappingURL=203.df8a1287.chunk.js.map