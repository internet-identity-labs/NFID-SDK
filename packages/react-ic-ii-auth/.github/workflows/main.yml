name: CI
on: [pull_request, push, workflow_dispatch]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Provision Linux
        run: bash .github/workflows/dfx-provision-linux.sh
      - name: Build ic components
        run: make deploy-local
      - name: Test ic components
        run: make test
      - name: Install modules
        run: yarn
      - name: Run tests
        run: yarn test
